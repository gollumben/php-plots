<!DOCTYPE html>
<html lang="en">
<head>

   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">

   <title>Interactive plotting by reading object from a ROOT file with JSROOT.</title>
Information: Loading of the files can take some seconds.
   <script src="https://root.cern/js/latest/scripts/JSRootCore.min.js?io&2d&onload=DrawMg" type="text/javascript"></script>

   <script type='text/javascript'>
	function findGetParameter(parameterName) {
	    var result = null,
		tmp = [];
	    location.search
		.substr(1)
		.split("&")
		.forEach(function (item) {
		  tmp = item.split("=");
		  if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
		});
	    return result;
	}

	// absolute file path can be used as well
	var filename = findGetParameter("ifile");
	//var filename = "outputImage.root";
	function DrawMg() {
		JSROOT.progress("Opening file " + filename);
		JSROOT.OpenFile(filename, function(file) {
			JSROOT.progress("Reading colors list");
			file.ReadObject("ListOfColors", function(obj) {
				JSROOT.Painter.adoptRootColors(obj);
				JSROOT.progress("Reading canvas");
				for (var n=0; n<file.fKeys.length; ++n) {
					if 		(file.fKeys[n].fName == "canvas2D") 	drawCanvas(file, "canvas2D"); 
					else if 	(file.fKeys[n].fName == "canvas") 	drawCanvas(file, "canvas"); 
				}
			});
		});
	}

	function drawCanvas(file, canvasName){
		file.ReadObject(canvasName, function(obj_g) {
			JSROOT.progress("done", 1000);
			JSROOT.draw("drawing", obj_g, "AL");
		});
	}
   </script>

</head>

<body>
  <div id="drawing" style="width:800px; height:600px"></div>
</body>

</html>
